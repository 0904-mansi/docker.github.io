FROM alpine:3.4
RUN apk add --update ca-certificates && rm -rf /var/cache/apk/*
ADD controller/static/dist /static/dist
ADD bin/controller /bin/controller

# Establish the version and upgrade matrix
ARG UCP_VERSION
LABEL com.docker.ucp.version="$UCP_VERSION" com.docker.ucp.upgrades_from="1.0.0,1.0.1,1.0.2,1.0.3,1.0.4,1.1.0,1.1.1,1.2.0"

EXPOSE 8080
ENTRYPOINT ["/bin/controller"]
